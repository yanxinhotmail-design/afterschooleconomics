<!DOCTYPE html>
<html lang="ja">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>用語集</title>
  <link rel="stylesheet" href="style.css">
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getDatabase, ref, runTransaction } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
  
    const firebaseConfig = {
      apiKey: "[secret]",
      authDomain: "k-site-8e88f.firebaseapp.com",
      databaseURL: "https://k-site-8e88f-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "k-site-8e88f",
      storageBucket: "k-site-8e88f.appspot.com",
      messagingSenderId: "480207957058",
      appId: "1:480207957058:web:0fbd10a2a4476892d851db"
    };
  
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const counterRef = ref(db, 'accessCount');
  
    runTransaction(counterRef, (current) => {
      return (current || 0) + 1;
    }).then(result => {
      document.getElementById("access-counter").textContent = `総アクセス数: ${result.snapshot.val()}`;
    }).catch(error => {
      console.error("読み込みエラー:", error);
      document.getElementById("access-counter").textContent = "読み込み失敗";
    });
  </script>
  
  </head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  
  <body>
    <header>
      <img src="logo.png" alt="放課後経済教室" class="logo">
    </header>
  
    <nav>
      <a href="index.html">HOME</a>
      <div class="dropdown">
        <a href="#" class="nav-link dropbtn">FINANCE</a>
        <div class="dropdown-content">
          <a href="pages/stock.html">株式</a>
          <a href="pages/bonds.html">債券</a>
          <a href="pages/funds.html">投資信託</a>
          <a href="pages/margin.html">信用</a>
          <a href="pages/futures.html">先物</a>
          <a href="pages/options.html">先物オプション</a>
          <a href="pages/otc.html">OTCデリバティブ</a>
          <a href="pages/savings.html">預金</a>
          <a href="pages/insurance.html">保険</a>
        </div>
      </div>
      <a href="glossary.html"class="active">GLOSSARY</a>
      <a href="contact.html">CONTACT</a>
    </nav>

  <main class="content">
    <div class="glossary-search">
      <input
        type="text"
        id="searchInput"
        placeholder="用語を検索（例：インフレ、株式）"
      >
    </div>

    <section id="glossary-container"></section>
    
    <script src="glossary-data.js"></script>
    <script src="glossary.js"></script>
    
  </main>

  <script>
    let count = localStorage.getItem("siteAccessCount");
  
    if (!count) {
      count = 1;
    } else {
      count = Number(count) + 1;
    }
  
    localStorage.setItem("siteAccessCount", count);
  
    document.getElementById("access-counter").textContent =
      "アクセス数：" + count;
  </script>
  <footer>
    <p id="access-counter">アクセス数を読み込み中...</p>
    <p>&copy; 2026 放課後経済教室</p>
  </footer>
  <script>
    const input = document.getElementById("searchInput");
    const terms = document.querySelectorAll("dl dt, dl dd");
  
    input.addEventListener("input", function () {
      const keyword = input.value.trim().toLowerCase();
  
      terms.forEach(el => {
        const text = el.textContent.toLowerCase();
        el.style.display = text.includes(keyword) ? "" : "none";
      });
    });
  </script>
  </body>
</html>
